$def with(name,list_news,pageno,pagecount,tags,rand_news)
$:render.header("")

	<div id="googlead">
		<img src="$config.static/images/sea.jpg" alt="singpenguin"/>
	</div>

	<div id="container">
		<div id="sidebar">
			$:render.search_form()
			
			<div id="comment">
				<header>为您推荐</header>
				$for news in rand_news:
					<p><a href="/news/$news['_id']" target="_blank">$news['title']</a></p>
			</div>
			<div id="tagcloud">
			$if tags:
				<h3>标签云</h3>
				<p>
				$for tag in tags:
					<a href="/tag/$tag">$tag</a>
				</p>
			</div>
			<div id="google_translate_element"></div>
		</div>

		<div id="contentbox">
			<h2>$name的文章列表</h2>
			$for news in list_news:
				<div class="item">
					<h2><a href="/polity/$news['_id']" target="_blank">$news['title']</a></h2>
					<span>发布于：$news['date'].strftime('%Y-%m-%d %H:%M:%S') , $news['click']次阅读 , $news['cmt_count']条评论</span>
				</div>
			<footer>
				<p id="pagenumber">
				$if pagecount < 7:
					$for x in range(1,pagecount+1):
						$if x==pageno:
							<a class="pagenow">$pageno</a>
						$else:
							<a href="/$name/page/$x">$x</a>
				$else:
					$if 3 < pageno < pagecount-3:
						<a href="/$name/page/1">1</a>...
						<a href="/$name/page/$(pageno-1)">$(pageno-1)</a>
						<a class="pagenow">$pageno</a>
						<a href="/$name/page/$(pageno+1)">$(pageno+1)</a>
						<a href="/$name/page/$(pageno+2)">$(pageno+2)</a>...
						<a href="/$name/page/$pagecount">$pagecount</a>
					$elif pageno >= pagecount-3:
						<a href="/$name/page/1">1</a>...
						$for x in range(pagecount-4,pagecount+1):
							$if x==pageno:
								<a class="pagenow">$pageno</a>
							$else:
								<a href="/$name/page/$x">$x</a>
					$else:
						$for x in range(1,6):
							$if x==pageno:
								<a class="pagenow">$pageno</a>
							$else:
								<a href="/$name/page/$x">$x</a>
						...&nbsp;&nbsp;&nbsp;<a href="/$name/page/$pagecount">$pagecount</a>
				</p>
			</footer>
		</div>
		<div class="clear"></div>
	</div>

	$:render.footer()

